# Deploying with Helm charts

Extract the helm chart from ibm-dba-bas-prod-1.0.0.tgz and copy to your installation directory.

## Installing the Chart

  To install the chart with release name `my-release`, run the following command:

  ```
  helm install --tls --name my-release ibm-dba-bas-prod -f my-values.yaml --namespace <namespace>`
  ```

  The command deploys `ibm-dba-bas-prod` onto the Kubernetes cluster, based on the values specified in the `my-values.yaml` file. If you use [BAStudio platform helm install helper script](configuration) before, you can use ./bastudio-helper/templates/updateValues.yaml file generated by the script. The configuration section lists the parameters that can be configured during installation.

### Verifying the Chart

1. After the installation is finished, see the instructions for verifying the chart by running the command: 

    `helm status my-release --tls`

2. Get the name of the pods that were deployed with ibm-dba-bas-prod by running the following command:

    `kubectl get pod -n <namespace>`

3. For each pod, check under Events to see that the images were successfully pulled and the containers were created and started,  by running the following command with the specific pod name:

    `kubectl describe pod <pod name> -n <namespace>`

4. Go to `https://<hostname>/BAStudio` in your browser (if you set up Business Automation Studio with Route) or `https://<hostname>:<NodePort>/BAStudio` (if you  set up Business Automation Studio with NodePort).

### Uninstalling the Chart
To uninstall and delete the my-release deployment, run the following command:

    helm delete my-release --purge --tls

This command removes all the Kubernetes components associated with the chart and deletes the release. If deletion can result in orphaned components, you must delete them manually.

For example, when you delete a release with stateful sets, the associated persistent volume must be deleted. Run the following command after deleting the chart release to clean up orphaned persistent volumes:

    kubectl delete pvc -l release=my-release
